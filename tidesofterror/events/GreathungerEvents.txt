add_namespace = greathunger

unit_leader_event = {#Decision for signing Free Agri-Works Act
	id = greathunger.1
	title = greathunger.1.t
	desc = greathunger.1.d
	
	is_triggered_only = yes
	
	option = { #On reconsideration...
		name = greathunger.1.a
		ai_chance = {factor = 100}
	}
	
	option = { #In fact, we can omit a change here or there...(Sign the Declaration)
		name = greathunger.1.b
		ai_chance = {factor = 100}
	}
	
	option = { #I hereby sign this act. (Sign the Declaration)
		name = greathunger.1.c
		ai_chance = {factor = 100}
	}
}

country_event = {#Farmers revolt
	id = greathunger.2
	title = greathunger.2.t
	desc = greathunger.2.d
	
	is_triggered_only = yes
	
	picture = GFX_event_greathunger1
	
	option = { #.. We stand by them.
		name = greathunger.2.a
		ai_chance = {factor = 100}
		custom_effect_tooltip = ENG_greathunger2_custom_a
		hidden_effect = {
			ENG = {
				start_civil_war = {
					ruling_party = populist
					ideology = ROOT
					states = all
					states_filter = {
						OR = {
							region = 44
							region = 61
						}
					}
					army_ratio = 0.5
					navy_ratio = 0
					air_ratio = 0.4
					keep_all_characters = no
				
			}
		}
	}
	}
	
	option = {
		name = greathunger.2.b
		ai_chance = {factor = 100}
		custom_effect_tooltip = ENG_greathunger2_custom_b
		hidden_effect = {
			ENG = {
				start_civil_war = {
					ideology = populist
					states = all
					states_filter = {
						OR = {
							region = 18
							region = 19
						}
					}
					army_ratio = 0.2
					navy_ratio = 0
					air_ratio = 0.05
					keep_all_characters = yes
					PREV = {
						ENG_henry_pinkerton = {
							set_nationality = PREV.PREV #Transfers to breakaway
							add_country_leader_role = {
								promote_leader = yes
								country_leader = {
									ideology = farmers_union
									#traits = { x } Example for adding trait in the future
								}
							}
						}
					}
				}
			}
		}
	}
	
	option = { #We can nay afford a civil war. We'll pass the damned Act.
		name = greathunger.2.c
		ai_chance = {factor = 100}
		hidden_effect = {
			random_unit_leader = {
				unit_leader_event = {
					id = greathunger.3
				}
			}	
		}
		effect_tooltip = {
			country_event = {
				id = greathunger.3
			}
		}
	}
}

unit_leader_event = {#Signing act after threatened with revolt
	id = greathunger.3
	title = greathunger.1.t
	desc = greathunger.1.d
	
	is_triggered_only = yes
	
	option = { #In fact, we can omit a change here or there...(Sign the Declaration)
		name = greathunger.1.b
		ai_chance = {factor = 100}
	}
	
	option = { #I hereby sign this act. (Sign the Declaration)
		name = greathunger.1.c
		ai_chance = {factor = 100}
	}
}

country_event = {#40 and a half casts
	id = greathunger.4
	title = greathunger.4.t
	desc = greathunger.4.d
	picture = GFX_event_greathunger2
	
	is_triggered_only = yes
	
	immediate = {#Set flag to disable 'Unchecked productivity' decision mission
		set_country_flag = eventflag_greathunger4
	}
	
	option = { #Ah. So we must find a scapegoat; And quickly.
		name = greathunger.4.a
		ai_chance = {factor = 100}
		var:greathunger4_state_ident = {
			remove_building = {
				type = industrial_complex
				level = 1
			}
			set_temp_variable = { resource_to_remove = THIS.resource@steel }
			multiply_temp_variable = { resource_to_remove = -0.5 }
			add_resource = {
				type = steel
				amount = resource_to_remove
			}
			add_manpower = -40.5
		}
		custom_effect_tooltip = customtooltip_engdecrease_ind_60
		hidden_effect = {
			subtract_from_variable = { ENG_greathunger_industrial_influence = 50 }
			ENG_greathunger_clamp_and_update_ui_effect = yes
		}
		add_stability = -0.2
		add_war_support = -0.03
		add_timed_idea = {
			idea = ENGIDEA_40_and_a_half
			days = 300
		}
		if = {
			limit = {
				has_active_mission = ENG_the_new_studies_fair_mission
			}
			add_days_mission_timeout = {
				mission = ENG_the_new_studies_fair_mission
				days = 120
			}
		}
	}
	
	option = { #This rampant productivity has gone on long enough.
		name = greathunger.4.b
		ai_chance = {factor = 100}
		var:greathunger4_state_ident = {
			remove_building = {
				type = industrial_complex
				level = 1
			}
			set_temp_variable = { resource_to_remove = THIS.resource@steel }
			multiply_temp_variable = { resource_to_remove = -0.5 }
			add_resource = {
				type = steel
				amount = resource_to_remove
			}
			add_manpower = -40.5
		}
		custom_effect_tooltip = customtooltip_engdecrease_ind_reset
		hidden_effect = {
			subtract_from_variable = { ENG_greathunger_industrial_influence = 100 }
			ENG_greathunger_clamp_and_update_ui_effect = yes
		}
		add_stability = -0.1
		add_war_support = -0.05
		add_timed_idea = {
			idea = ENGIDEA_40_and_a_half
			days = 365
		}
		if = {
			limit = {
				has_active_mission = ENG_the_new_studies_fair_mission
			}
			add_days_mission_timeout = {
				mission = ENG_the_new_studies_fair_mission
				days = 120
			}
		}
	}
}

country_event = {#Start deadline
	id = greathunger.5
	title = greathunger.5.t
	desc = greathunger.5.d
	#picture = GFX_event_greathunger2
	
	is_triggered_only = yes
	
	option = { #1%
		name = greathunger.5.a
		ai_chance = {factor = 100}
		set_variable = { ENG_greathunger_deadline_amount = 1 }
	}
	
	option = { #0.6%
		name = greathunger.5.b
		ai_chance = {factor = 100}
		set_variable = { ENG_greathunger_deadline_amount = 0.6 }
	}
	
	option = { #0.4%
		name = greathunger.5.c
		ai_chance = {factor = 100}
		set_variable = { ENG_greathunger_deadline_amount = 0.4 }
	}
	
	option = { #0.2%
		name = greathunger.5.e
		ai_chance = {factor = 100}
		set_variable = { ENG_greathunger_deadline_amount = 0.2 }
	}
}

news_event = {#Succesfully hit deadline
	id = greathunger.6
	title = greathunger.6.t
	desc = greathunger.6.d
	#picture = GFX_event_greathunger2
	
	is_triggered_only = yes
	
	immediate = {
		set_variable = { ENG_greathunger_deadline_alter = 30 }
		divide_variable = { ENG_greathunger_deadline_alter = ENG_greathunger_deadline_amount }
		add_days_mission_timeout = {
			mission = ENG_greathunger_agrarianriseup
			days = ENG_greathunger_deadline_alter
		}
		remove_mission = ENG_greathunger_dynamic_deadline
		clear_variable = ENG_greathunger_deadline_alter
		clear_variable = ENG_greathunger_deadline_amount
	}
	
	option = {
		name = greathunger.6.a
		ai_chance = {factor = 100}
	}
}

country_event = {#
	id = greathunger.7
	title = greathunger.7.t
	desc = greathunger.7.d
	#picture = GFX_event_greathunger2
	
	is_triggered_only = yes
	
	option = {
		name = greathunger.7.a
		ai_chance = {factor = 100}
		set_variable = { ENG_greathunger_deadline_amount = 1 }
	}
	
	option = {
		name = greathunger.7.b
		ai_chance = {factor = 100}
		set_variable = { ENG_greathunger_deadline_amount = 0.6 }
	}
}